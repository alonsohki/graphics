#pragma once

static const unsigned char __hex2decTable [] =
{
    '0', '1', '2', '3', '4', '5', '6', '7',
    '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'
};

static const unsigned int __dec2hexTable [] =
{
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 000-009 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 010-019 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 020-029 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 030-039 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 1,       /* 040-049 */
    2, 3, 4, 5, 6, 7, 8, 9, 0, 0,       /* 050-059 */
    0, 0, 0, 0, 0, 10, 11, 12, 13, 14,  /* 060-069 */
    15, 0, 0, 0, 0, 0, 0, 0, 0, 0,      /* 070-079 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 080-089 */
    0, 0, 0, 0, 0, 0, 0, 10, 11, 12,    /* 090-099 */
    13, 14, 15, 0, 0, 0, 0, 0, 0, 0,    /* 100-109 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 110-119 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 120-129 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 130-139 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 140-149 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 150-159 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 160-169 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 170-179 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 180-189 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 190-199 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 200-209 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 210-219 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 220-229 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 230-239 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0,       /* 240-249 */
    0, 0, 0, 0, 0, 0                    /* 250-255 */
};


static inline unsigned int hex2dec ( const char* szHex, unsigned int uiLength )
{
    unsigned int uiResult = 0;
    for ( unsigned int i = 0; i < uiLength; ++i )
    {
        uiResult <<= 4;
        uiResult |= __dec2hexTable [ ( unsigned char )szHex [ i ] ];
    }
    return uiResult;
}

static inline char* dec2hex ( unsigned int uiDec, char* szDest, unsigned int uiLength )
{
    if ( uiLength != 0 )
    {
        szDest [ --uiLength ] = '\0';

        while ( uiLength > 0 )
        {
            szDest [ --uiLength ] = __hex2decTable [ uiDec & 0xF ];
            uiDec >>= 4;
        }
    }

    return szDest;
}
